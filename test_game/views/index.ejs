<!DOCTYPE html>
<html ng-app="test_game">
    <head>
        <title><%=locals.appName%></title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/bootstrap-3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="/bootstrap-treeview/bootstrap-treeview.min.css">
        <!-- 提前引入,防止FOUC -->
        <script src="/javascripts/angular.js"></script>
        <script src="http://cdn.staticfile.org/angular-ui-router/0.2.10/angular-ui-router.min.js"></script>
        <!-- 引入的脚本 -->
        <script src="/javascripts/jquery-1.11.1.min.js"></script>
        <script src="/bootstrap-3.2.0/js/bootstrap.min.js"></script>
        <script src="/bootstrap-treeview/bootstrap-treeview.min.js"></script>
        <script src="/ui-bootstrap-0.11.0/ui-bootstrap-tpls-0.11.0.js"></script>
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <script src="http://cdn.bootcss.com/angular.js/1.3.0-beta.13/angular-route.min.js"></script>
    </head>
    <body ng-controller="main_controller">
        <!-- 提示信息 -->
        <%if(locals.success && locals.success.length > 0){%>
            <div class="alert alert-success"><%=locals.success%></div>
        <%}%>
        <div class="container-fluid" style="margin-top:10px;">
            <div ng-view></div>
        </div>
</body>

<script type="text/javascript" src="/js/main_controller.js"></script>
<script type="text/javascript" src="/js/honor_controller.js"></script>
<script type="text/javascript" src="/js/battles_controller.js"></script>
<script type="text/javascript">

    var socket = io();
    socket.on('conn', function(m){
        //alert(m)
    });
    socket.on('disconn', function(m){
        //alert(m)
    });

    var app = angular.module('test_game', ['ngRoute', 'ui.bootstrap']);
    app.config(['$routeProvider', function($routeProvider) {
        $routeProvider.when('/main', { //主界面
            templateUrl : '/main',
            controller  : 'main_controller'
        }).when('/honor', {
            templateUrl : '/honor', //荣誉榜
            controller  : 'honor_controller'
        }).when('/battles', {
            templateUrl : '/battles', //我的挑战
            controller  : 'battles_controller'
        }).when('/manual', {
            templateUrl : '/manual' //游戏说明
        }).otherwise({
            redirectTo : '/main'
        });
    }]).controller('main_controller', ['$scope', '$http', main_controller])
            .controller('honor_controller', ['$scope', '$http', main_controller])
            .controller('battles_controller', ['$scope', '$http', main_controller]);




</script>
</html>
